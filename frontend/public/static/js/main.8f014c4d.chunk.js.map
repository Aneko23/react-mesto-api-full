{"version":3,"sources":["images/logo.svg","components/Header.js","images/Edit-pencil.svg","components/ImagePopup.js","images/Trash.svg","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","utils/api.js","utils/auth.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/AddPlacePopup.js","components/EditAvatarPopup.js","components/DeleteCardPopup.js","components/ProtectedRoute.js","components/Login.js","components/Register.js","images/success.svg","images/fail.svg","components/InfoTooltip.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","className","src","Logo","alt","path","userEmail","onClick","handleLogOut","to","ImagePopup","card","isPopupOpened","link","name","type","onClosePopup","CurrentUserContext","React","createContext","Card","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","elem","Trash","openDeletePopup","onCardClick","onCardLike","length","Main","useState","isOnMouseOver","setOnMouseOver","onMouseOver","onMouseOut","onEditAvatar","style","backgroundImage","avatar","Pencil","onEditProfile","about","onAddPlace","selectedCard","onClose","cards","map","onCardDelete","Footer","Api","adress","token","this","_adress","_token","res","ok","json","Promise","reject","Error","status","fetch","method","headers","authorization","body","JSON","stringify","then","_getResponseData","id","result","data","localStorage","getItem","api","BASE_URL","window","location","protocol","process","REACT_APP_API_URL","PopupWithForm","isOpen","noValidate","onSubmit","title","children","submit","EditProfilePopup","description","setDescription","setName","useEffect","e","preventDefault","onUpdateUser","value","onChange","target","required","minLength","maxLength","AddPlacePopup","place","setPlace","url","setUrl","placeholder","EditAvatarPopup","linkRef","current","useRef","onUpdateAvatar","ref","DeleteCardPopup","cardDelete","removedCard","ProtectedRoute","Component","component","loggedIn","Login","handleLogin","username","email","password","setData","handleChange","Register","handleRegister","InfoTooltip","resultSuccess","Success","Fail","App","closeAllPopups","isEditAvatarPopupOpen","setEditAvatarPopupOpen","setSelectedCard","setCurrentUser","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isDeleteCardPopupOpen","setDeleteCardPopupOpen","setCards","setRemovedCard","setLoggedIn","setResultSuccess","setPopupOpen","setUserEmail","history","useHistory","tokenCheck","push","loginSuccess","jwt","console","log","message","getUserProfile","catch","error","handleCloseAllPopups","handleUpdateUser","setUserProfile","err","getCards","reverse","Provider","removeItem","auth","setItem","user","clickLike","newCard","newCards","c","addCard","changeUserAvatar","deleteCard","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8f014c4d.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.a307e1c4.svg\";","import React from \"react\";\nimport { Link, Switch, Route } from \"react-router-dom\";\nimport Logo from '../images/logo.svg';\n\nexport default function Header (props) {\n\n    //console.log(props.userEmail)\n    const logOut = () => {\n        props.handleLogOut();\n    }\n\n    return (\n    \n    <header className=\"header-container\"> \n        <div className=\"header\">\n            <img className=\"header__logo\" src={Logo} alt=\"Логотип сайта\" />\n            <div className=\"container\">\n                <Switch>\n                    <Route path='/cards'>\n                        <p className=\"user-email_active\">{props.userEmail}</p>\n                        <button onClick={logOut} className=\"link__exit_active\">Выход</button>\n                    </Route>\n                    <Route path=\"/sign-up\">\n                        <Link to=\"/sign-in\" className=\"link_active\">Войти</Link>\n                    </Route>\n                    <Route path=\"/sign-in\">\n                        <Link to=\"/sign-up\" className=\"link_active\">Регистрация</Link>\n                    </Route>\n                </Switch>\n            </div>\n        </div>\n        <div className=\"header__line\" /> \n    </header>\n    )\n}","export default __webpack_public_path__ + \"static/media/Edit-pencil.a086f758.svg\";","import React from 'react';\n\nexport default function ImagePopup(props) {\n    \n    return (\n            <div className={!props.card.isPopupOpened?`popup popup_type_image`:`popup popup_type_image popup_opened`}>\n                <div className=\"popup__box\">\n                    <img className=\"popup__pic\" src={props.card.link} alt={props.card.name} />\n                    <h3 className=\"popup__name\">{props.card.name}</h3>\n                    <button type=\"button\" className=\"close-button\" onClick={props.onClosePopup} />\n                </div>\n            </div>\n    )\n}","export default __webpack_public_path__ + \"static/media/Trash.a274c87c.svg\";","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();","import React from 'react';\nimport Trash from \"../images/Trash.svg\";\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nexport default function Card(props) {\n    const currentUser = React.useContext(CurrentUserContext);\n\n    const isOwn = (props.card.owner._id || props.card.owner) === currentUser._id;\n\n    function checkElement (elem) {\n        return elem === currentUser._id\n    }\n    \n    const isLiked = props.card.likes.some( checkElement );\n    \n    function handleClick() {\n        props.onCardClick(props.card);\n      }  \n\n    function handleLikeClick() {\n        props.onCardLike(props.card);\n    }\n\n    function handleDeleteClick() {\n        props.openDeletePopup(props.card);\n    }\n\n    return (\n        <div className=\"element\">\n            <li className= \"element__card\">\n                <button type=\"button\" className={`delete-button ${isOwn ? 'delete-button_active' : 'delete-button_inactive'}`}><img  src={Trash} alt=\"Иконка удаления\" onClick={handleDeleteClick} /></button>\n                <img className=\"element__image\" onClick={handleClick} src={props.link} alt={props.name} />\n                <div className=\"element__detail\">\n                    <h3 className=\"element__name\">{props.name}</h3>\n                        <div className=\"element__likes\">\n                            <button type=\"button\" className={`button-like ${isLiked && 'button-like_active'}`} onClick={handleLikeClick} />\n                            <p className= \"like-counter\">{props.likes.length}</p>\n                        </div>\n                </div>\n            </li> \n        </div>\n    )\n}","import React from \"react\";\nimport Pencil from '../images/Edit-pencil.svg';\nimport ImagePopup from './ImagePopup';\nimport Card from '../components/Card';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nexport default function Main(props) {\n    const [isOnMouseOver, setOnMouseOver] = React.useState(false);\n    const currentUser = React.useContext(CurrentUserContext);\n\n    function onMouseOverAvatar() {\n        setOnMouseOver(true);\n    }\n\n    function onMouseOutAvatar() {\n        setOnMouseOver(false);\n    }\n\n    return (\n        <main>\n            <section className=\"profile\">\n                <div className=\"profile__detail\">\n                    <div className=\"avatar\" onMouseOver={onMouseOverAvatar} onMouseOut={onMouseOutAvatar} onClick={props.onEditAvatar}>\n                        <div className={isOnMouseOver?`profile__avatar profile__avatar_dark`:`profile__avatar`} style={{ backgroundImage: `url(${currentUser.avatar})` }}  />\n                        <img className={isOnMouseOver?`edit-pencil edit-pencil_active`:`edit-pencil`} src={Pencil} alt=\"Иконка редактирования\" />\n                    </div>\n                    <div className=\"profile__info\">\n                        <h1 className=\"profile__name\">{currentUser.name}</h1>\n                        <button type=\"button\" onClick={props.onEditProfile} className=\"edit-button\" />\n                        <p className=\"profile__work\">{currentUser.about}</p>\n                    </div>    \n                </div>  \n                <button type=\"button\" onClick={props.onAddPlace} className=\"add-button\" />\n            </section>\n            <ImagePopup card={props.selectedCard} onClose={props.onClose} onClosePopup={props.onClosePopup}/>\n            <ul className=\"elements\">\n            {props.cards.map((card) => (\n               <Card \n                card={card}\n                link={card.link}\n                name={card.name}\n                likes={card.likes}\n                key={card._id}\n                onCardClick={props.onCardClick}\n                onCardLike={props.onCardLike}\n                onCardDelete={props.onCardDelete}\n                openDeletePopup={props.openDeletePopup}\n               >\n               </Card>\n            ))\n            }\n            </ul>\n            </main>\n    )\n    }","import React from \"react\";\n\nexport default function Footer() {\n    return(\n        <footer className=\"footer\">\n          <p className=\"footer__site\">&copy; 2021. Mesto Russia</p>\n        </footer>\n    )\n}","class Api {\n    constructor({adress, token}) {\n        this._adress = adress;\n        this._token = token\n    }\n\n    _getResponseData(res) {\n        if (!res.ok) {\n            return Promise.reject(new Error(`Ошибка: ${res.status}`));\n        }\n        return res.json();\n    } \n\n    addCard(name, link) {\n        return fetch(`${this._adress}/cards`, {\n            method: 'POST',\n            headers: {\n                authorization: this._token,\n                'Content-Type': 'application/json',\n              },\n            body: JSON.stringify({\n                name,\n                link\n            })\n        })\n        .then(this._getResponseData)\n    }\n\n    deleteCard(id) {\n        return fetch(`${this._adress}/cards/${id}`, {\n            method: \"DELETE\",\n            headers: {\n                authorization: this._token\n              }\n        })\n        .then(this._getResponseData)\n    }\n        \n\n    getCards() {\n        return fetch(`${this._adress}/cards`, {\n            method: 'GET',\n            headers: {\n                authorization: this._token\n              }\n        }).then((result) => {\n            if (!result.ok) {\n                return Promise.reject('Server error');\n            }\n            return result.json();\n        }).then((data) => {\n            return data;\n        })\n    }\n\n    getUserProfile() {\n        return fetch(`${this._adress}/users/me`, {\n        method: 'GET',\n        headers: {\n            authorization: this._token\n          },\n    })\n    .then(this._getResponseData)\n  }\n\n  setUserProfile(name, about) {\n    return fetch(`${this._adress}/users/me`, {\n        method: 'PATCH',\n        headers: {\n            authorization: this._token,\n            'Content-Type': 'application/json',\n          },\n        body: JSON.stringify({\n            name,\n            about,\n        }),\n    })\n    .then(this._getResponseData)\n  }\n\n  clickLike(id, isLiked) {\n    return fetch(`${this._adress}/cards/${id}/likes`, {\n        method: (isLiked) ? 'DELETE' : 'PUT',\n        headers: {\n            authorization: this._token,\n            'Content-Type': 'application/json',\n          }\n    })\n    .then(this._getResponseData)\n  }\n\n  changeUserAvatar(avatar) {\n    return fetch(`${this._adress}/users/me/avatar`, {\n        method: 'PATCH',\n        headers: {\n            authorization: this._token,\n            'Content-Type': 'application/json',\n          },\n        body: JSON.stringify({\n            avatar\n    })\n    })\n        .then(this._getResponseData)\n    }\n\n\n}\n\nconst token = localStorage.getItem('jwt');\n\nconst api = new Api ({\n    adress: 'http://api.mesto.aneko23.nomoredomains.icu',\n    token: `Bearer ${token}`\n}) \n\nexport default api;","const BASE_URL = `${window.location.protocol}${process.env.REACT_APP_API_URL || '//localhost:3001'}`;\n\nexport const register = (password, email) => {\n    return fetch(`${BASE_URL}/signup`, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({password, email})\n    })\n    .then((res) => {\n      if (!res.ok) {\n        return Promise.reject(`Ошибка: ${res.status}`); \n    }\n    return res.json()\n    });\n    \n  };\n  \n  export const authorize = (email, password) => {\n    return fetch(`${BASE_URL}/signin`, {\n      //mode: 'no-cors',\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({email, password})\n    })\n    .then((res) => {\n      if (!res.ok) {\n        return Promise.reject(`Ошибка: ${res.status}`); \n    }\n    return res.json()\n  });\n}\n\n  export const getContent = (token) => {\n    return fetch(`${BASE_URL}/users/me`, {\n      method: 'GET',\n      headers: {\n        //'Accept': 'application/json',\n        //'Content-Type': 'application/json',\n        authorization: `Bearer ${token}`,\n      }\n    })\n    .then(res => res.json())\n    .then(data => data)\n  }","import React from \"react\";\n\nexport default function PopupWithForm(props) {\n    return (\n        <div className={!props.isOpen || props.onClose?`popup popup_type_${props.name}`:`popup popup_type_${props.name} popup_opened` }>\n            <form className={`popup__container popup__container_${props.name}`} noValidate onSubmit={props.onSubmit}>\n                <h2 className=\"popup__title\">{props.title}</h2>\n                {props.children}\n                <button className=\"submit-button\" type=\"submit\" name=\"SubmitButton\">{props.submit}</button>\n                <button type=\"button\" className=\"close-button\" onClick={props.onClosePopup} />\n            </form>\n        </div> \n    )\n\n}","import React from \"react\";\nimport PopupWithForm from './PopupWithForm';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nexport default function EditProfilePopup(props) {\n    const currentUser = React.useContext(CurrentUserContext);\n    const [description, setDescription] = React.useState('');\n    const [name, setName] = React.useState('');\n\n//Обновляю значение name\n    function handleChangeName(e) {\n       setName(e.target.value);\n    }\n\n//Обновляю значение description\n    function handleChangeDescription(e) {\n        setDescription(e.target.value);\n    }\n\n//Сохраняю изменения\n    function handleSubmit(e) {\n        e.preventDefault();\n      \n        props.onUpdateUser({\n          name: name,\n          about: description,\n        });\n      } \n\n//Дублирую данные профиля в инпут\n    React.useEffect(() => {\n        if (currentUser) {\n            setName(currentUser.name);\n            setDescription(currentUser.about);\n        }\n    }, [currentUser]);\n\n//Обновляю поля после закрытия попапа\n    React.useEffect(() => {\n        if (props.onClose) {\n            setName(currentUser.name);\n            setDescription(currentUser.about);\n        }\n    }, [props.onClose, currentUser])\n\n    return (\n        <PopupWithForm name='edit' title='Редактировать профиль' submit='Сохранить' onSubmit={handleSubmit} isOpen={props.isOpen} onClose={props.onClose} onClosePopup={props.onClosePopup}>\n            <input className=\"popup__data popup__data_name\" id=\"form-name\" value={name || ''} onChange={handleChangeName} required minLength=\"2\" maxLength=\"40\" type=\"text\" name=\"nameInput\" />\n            <span className= \"popup__input-error\" id='form-name-error' />\n            <input className=\"popup__data popup__data_job\" id=\"form-job\" value={description || ''} onChange={handleChangeDescription} required minLength=\"2\" maxLength=\"200\" type=\"text\" name=\"jobInput\" />\n            <span className= \"popup__input-error\" id='form-job-error' />\n        </PopupWithForm>\n\n    )\n}","import React from \"react\";\nimport PopupWithForm from './PopupWithForm';\n\nexport default function AddPlacePopup(props) {\n    const [place, setPlace] = React.useState('');\n    const [url, setUrl] = React.useState('');\n\n//Обновляю поля после закрытия попапа\n    React.useEffect(() => {\n        if (props.onClose) {\n            setPlace('');\n            setUrl('');\n        }\n    }, [props.onClose])\n\n//Изменяю значение поля \"название\"\n    function changePlace(e) {\n        setPlace(e.target.value);\n    }\n\n//Изменяю значение поля \"ссылка\"\n    function changeLink(e) {\n        setUrl(e.target.value);\n    }\n\n//Обработчик события\n    function handleSubmit(e) {\n        e.preventDefault();\n        props.onAddPlace({\n            name: place,\n            link: url\n        })\n    }\n\n\n    return (\n        <PopupWithForm name='place' title='Новое место' submit='Добавить' isOpen={props.isOpen} onClose={props.onClose} onClosePopup={props.onClosePopup} onSubmit={handleSubmit} >\n            <input className=\"popup__data popup__data_place\" id=\"form-place\" type=\"text\" placeholder=\"Название\" value={place} onChange={changePlace} name=\"placeInput\" required minLength=\"2\" maxLength=\"30\" />\n            <span className= \"popup__input-error\" id='form-place-error' />\n            <input className=\"popup__data popup__data_link\" id=\"form-link\" placeholder=\"Ссылка на картинку\" value={url} onChange={changeLink} type=\"url\" name=\"linkInput\" required />\n            <span className= \"popup__input-error\" id='form-link-error' />\n        </PopupWithForm>\n    )\n}","import React from \"react\";\nimport PopupWithForm from './PopupWithForm';\n\nexport default function EditAvatarPopup(props) {\n\n  //Обновляю поля после закрытия попапа\n  React.useEffect(() => {\n    if (props.onClose) {\n      linkRef.current.value = '';\n    }\n}, [props.onClose])\n\n    const linkRef = React.useRef();\n\n    function handleSubmit(e) {\n        e.preventDefault();\n      \n        props.onUpdateAvatar({\n          avatar: linkRef.current.value,\n        });\n      } \n\n    return (\n        <PopupWithForm name='avatar' title='Обновить аватар' submit='Сохранить' isOpen={props.isOpen} onClose={props.onClose} onClosePopup={props.onClosePopup} onSubmit={handleSubmit}>\n            <input className=\"popup__data popup__data_link\" id=\"form-link\" placeholder=\"Ссылка на картинку\" type=\"url\" name=\"linkInput\" required ref={linkRef} />\n            <span className= \"popup__input-error\" id='form-link-error' />\n        </PopupWithForm>\n    )\n}","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nexport default function DeleteCardPopup(props) {\n\n    function handleSubmit(e) {\n        e.preventDefault();\n      \n        props.cardDelete(props.removedCard);\n      } \n\n    return (\n        <PopupWithForm name='delete' title='Вы уверены?' submit='Да' isOpen={props.isOpen} onClose={props.onClose} onClosePopup={props.onClosePopup} onSubmit={handleSubmit} />\n    )\n}","import React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\n  return (\n    <Route>\n      {\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\n      }\n    </Route>\n)}\n\nexport default ProtectedRoute;","import React from \"react\";\nimport { useHistory } from 'react-router-dom';\n\nconst Login = ({ handleLogin }) => {\n    const [data, setData] = React.useState({\n        username: '',\n        email: '',\n        password: ''\n    })\n\n    const handleChange = (e) => {\n        const {name, value} = e.target;\n        setData({\n            ...data,\n            [name]: value \n        });\n      }\n\n      const handleSubmit = (e) => {\n        const { email, password } = data;\n        e.preventDefault();\n        if (!email || !password){\n          return;\n        }\n\n        handleLogin(email, password);\n      }\n\n    return (\n        <div className=\"login__page\">\n            <h2 className=\"login__title\">Вход</h2>\n            <form className=\"login__form\" onSubmit={handleSubmit}>\n                <input className=\"login__data\" id=\"form-name\" name=\"email\" value={data.email} onChange={handleChange} required type=\"email\" placeholder=\"Email\"/>\n                <span className= \"login__input-error\" id='form-name-error' />\n                <input className=\"login__data\" id=\"form-job\" name=\"password\" value={data.password} onChange={handleChange} required type=\"password\" placeholder=\"Пароль\" />\n                <span className= \"login__input-error\" id='form-job-error' />\n                <button type=\"submit\" className=\"login__link\">Войти</button>\n            </form>\n        </div>\n\n    )\n}\n\nexport default Login;","import React from \"react\";\nimport { Link } from 'react-router-dom';\n\nconst Register = ({ handleRegister }) => {\n    const [data, setData] = React.useState({\n        email: '',\n        password: ''\n    })\n\n    const handleChange = (e) => {\n        const {name, value} = e.target;\n        setData({\n            ...data,\n            [name]: value\n        });\n    }\n    const handleSubmit = (e) => {\n        e.preventDefault();\n          const { password, email } = data;\n\n          handleRegister(password, email);\n      }\n\n    return (\n        <div className=\"register__page\">\n            <h2 className=\"register__title\">Регистрация</h2>\n            <form className=\"register__form\" onSubmit={handleSubmit}>\n                <input className=\"register__data\" id=\"form-name\" name=\"email\" value={data.email} onChange={handleChange} required type=\"email\" placeholder=\"Email\"/>\n                <span className= \"register__input-error\" id='form-name-error' />\n                <input className=\"register__data\" id=\"form-job\" name=\"password\" required type=\"password\" value={data.password} onChange={handleChange} placeholder=\"Пароль\" />\n                <span className= \"register__input-error\" id='form-job-error' />\n                <button type=\"submit\" className=\"register__link\">Зарегистрироваться</button>\n            </form>\n            <div className=\"register__signin\">\n            <p>Уже зарегистрированы?</p>\n            <Link to=\"sign-in\" className=\"register__login-link\">Войти</Link>\n            </div>\n        </div>\n\n    )\n}\n\nexport default Register;","export default __webpack_public_path__ + \"static/media/success.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/fail.df8eddf6.svg\";","import React from 'react';\nimport Success from '../images/success.svg';\nimport Fail from '../images/fail.svg';\n\nexport default function InfoTooltip(props) {\n        return (\n            <div className={props.isOpen ? \"popup popup_type_success popup_opened\" : \"popup popup_type_success\"}>\n                <form className={`popup__container popup__container_succes`} noValidate>\n                    <img className=\"popup__aut-result\" src={props.resultSuccess ? Success : Fail} alt={props.resultSuccess ? \"Успешная регистрация\" : \"Неудачная регистрация\"} />\n                    <h2 className=\"popup__auth-title\">{props.resultSuccess ? \"Вы успешно зарегистрировались!\" : \"Что-то пошло не так! Попробуйте ещё раз.\"}</h2>\n                    <button type=\"button\" className=\"close-button\" onClick={props.onClosePopup} />\n                </form>\n            </div> \n        )\n}","import React from 'react';\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\nimport '../index.css';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport api from '../utils/api';\nimport * as auth from '../utils/auth';\nimport EditProfilePopup from './EditProfilePopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport DeleteCardPopup from './DeleteCardPopup';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport ProtectedRoute from './ProtectedRoute';\nimport Login from './Login';\nimport Register from './Register';\nimport InfoTooltip from './InfoTooltip';\n\nexport default function App() {\n  const [onClose, closeAllPopups] = React.useState(true);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({isPopupOpened: false});\n  const [currentUser, setCurrentUser] = React.useState([]);\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\n  const [isDeleteCardPopupOpen, setDeleteCardPopupOpen] = React.useState(false);\n  const [cards, setCards] = React.useState([]);\n  const [removedCard, setRemovedCard] = React.useState([]);\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [resultSuccess, setResultSuccess] = React.useState(false);\n  const [isOpen, setPopupOpen] = React.useState(false);\n\n  const [userEmail, setUserEmail] = React.useState('')\n\n  const history = useHistory();\n\n  // Проверяю токен прикаждом обновлении\n  React.useEffect(() => {\n    tokenCheck();\n  }, [history])\n\n  // Перевожу на страницу, если пользователь зарегистрирован\n  React.useEffect(() => {\n    if (loggedIn) {\n      history.push('/cards');\n    }\n  }, [loggedIn])\n\n  // Функция регистрации\n  const handleRegister = (password, email) => {\n    auth.register(password, email)\n    .then((res) => {\n        history.push('/sign-in');\n        setPopupOpen(true);\n        loginSuccess();\n  })\n    .catch((error) => {\n      console.log(error);\n      setPopupOpen(true);\n}); \n  }\n\n  // Обновляю значение при успешном входе\n  const loginSuccess = () => {\n    setResultSuccess(true);\n  }\n\n  // Функция авторизации\n  const handleLogin = (email, password) => {\n    auth.authorize(email, password)\n        .then((data) => {\n          console.log(data)\n            localStorage.setItem('jwt', data.token);\n            setLoggedIn(true);\n            setUserEmail(email);\n            setCurrentUser(data.user);\n            history.push('/cards');\n        })\n        .catch((error) => {\n          console.log(error);\n  }); \n  }\n\n  // Функция проверки токена\n  const tokenCheck = () => {\n    const jwt = localStorage.getItem('jwt');\n    if (jwt) {\n      auth.getContent(jwt).then((res) => {\n        if (res){\n          history.push('/cards');\n        }\n      }); \n    } else {\n      console.log({message: 'Токен не передан или передан не в том формате'})\n    }\n  }\n\n  //Получаю данные пользователя с сервера\n  React.useEffect(() => {\n    api.getUserProfile()\n    .then(res => {\n      setCurrentUser(res);\n      setUserEmail(res.email);\n    })\n    .catch((error) => {\n        console.log(`Возникла ошибка: ${error}`)\n    })\n  }, []);\n\n  // Функция выхода из приложения\n  const handleLogOut = () => {\n    const jwt = localStorage.getItem('jwt');\n    localStorage.removeItem('jwt');\n\n    history.push('/sign-in');\n  }\n\n  // Закрываю попапы\n  React.useEffect(() => {\n    if (onClose) {\n      setEditAvatarPopupOpen(false);\n      setEditProfilePopupOpen(false);\n      setAddPlacePopupOpen(false);\n      setDeleteCardPopupOpen(false);\n      setResultSuccess(false);\n      setPopupOpen(false);\n    }\n  }, [onClose])\n\n//Получаю гелерею с сохранёнными карточками\n    React.useEffect(() => {\n      api.getCards()\n      .then(res => {\n        setCards(res.reverse())\n      })\n      .catch((error) => {\n          console.log(`Возникла ошибка: ${error}`)\n      })\n    }, []);\n  \n//Функция для клика по сердечку\n    function handleCardLike(card) {\n      const isLiked = card.likes.some(function(elem){\n        return elem === currentUser._id\n      });\n      api.clickLike(card._id, isLiked)\n      .then((newCard) => {\n        const newCards = cards.map(c => c._id === card._id ? newCard : c);\n        setCards(newCards);\n      })\n      .catch((error) => {\n        console.log(`Возникла ошибка: ${error}`)\n    })\n  }\n  \n//Функция удаления карточки\n      function handleCardDelete(card) {\n          api.deleteCard(card._id)\n            .then(() => {\n                const newCards = cards.filter((c) => c.owner._id === card.owner._id);\n                //Обновляю список карточек\n                api.getCards()\n                .then(res => {\n                  console.log(res)\n                  setCards(res)\n                })\n                .catch((error) => {\n                   console.log(`Возникла ошибка: ${error}`)\n                })\n                handleCloseAllPopups();\n                return newCards;\n            })\n            .catch((error) => {\n              console.log(`Возникла ошибка: ${error}`)\n          });\n      }\n  \n//Функция для открытия попапа с картинкой\n  function handleCardClick(card) {\n    setSelectedCard({\n      isPopupOpened: true,\n      name: card.name,\n      link: card.link\n    });\n  }\n\n//Функция для открытия попапа для редактирования аватара\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(true);\n    closeAllPopups(false);\n}\n\n//Функция для открытия попапа для редактирования профиля\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(true);\n    closeAllPopups(false);\n  }\n\n//Функция для открытия попапа для добавления новых карточек\n  function handleAddPlaceClick() {\n      setAddPlacePopupOpen(true);\n      closeAllPopups(false);\n  }\n\n//Функция для открытия попапа с подтверждением об удалении карточки\n  function handleDeleteCardClick(card) {\n    setRemovedCard(card);\n    setDeleteCardPopupOpen(true);\n    closeAllPopups(false);\n  }\n\n//Функция для закрытия всех попапов\n  function handleCloseAllPopups() {\n    closeAllPopups(true);\n    setSelectedCard({});\n  }\n\n//Функция для обновления данных о пользователе\n  function handleUpdateUser(data) {\n    api.setUserProfile(data.name, data.about)\n    .then(res => {\n      setCurrentUser(res);\n      handleCloseAllPopups();\n    })\n    .catch((err) => {\n        console.log(`Возникла ошибка: ${err}`)\n    });\n  }\n\n//Функция добавления новой карточки\n  function handleAddPlaceSubmit(newCard) {\n    api.addCard(newCard.name, newCard.link)\n        .then(card => {\n            setCards([card, ...cards]);\n            handleCloseAllPopups();\n    })\n    .catch((err) => console.log (`Возникла ошибка: ${err}`));\n  }\n\n//Функция для обновления аватара\n  function handleUpdateAvatar(card) {\n    api.changeUserAvatar(card.avatar)\n    .then(res => {\n      setCurrentUser(res);\n      handleCloseAllPopups();\n    })\n    .catch(err => {\n      console.log(`Возникла ошибка: ${err}`)\n    });\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n          <Switch>\n          <div className=\"root\">\n            <div className=\"page\">\n            <Header userEmail={userEmail} handleLogOut={handleLogOut} />\n            <Route path=\"/sign-in\">\n              <Login handleLogin={handleLogin} />\n              <InfoTooltip isOpen={isOpen} onClose={onClose} onClosePopup={closeAllPopups} resultSuccess={resultSuccess} />\n            </Route>\n            <Route path=\"/sign-up\">\n              <Register handleRegister={handleRegister} />\n              <InfoTooltip isOpen={isOpen} onClose={onClose} onClosePopup={closeAllPopups} resultSuccess={resultSuccess} />\n            </Route>\n            <ProtectedRoute path=\"/cards\" loggedIn={loggedIn} component={Main, EditProfilePopup, AddPlacePopup, EditAvatarPopup, DeleteCardPopup} />\n            <Route path=\"/cards\">\n              <Main\n                cards={cards}\n                onAddPlace={handleAddPlaceClick} \n                onEditProfile={handleEditProfileClick} \n                onEditAvatar={handleEditAvatarClick} \n                onClose={onClose} \n                onClosePopup={handleCloseAllPopups}\n                selectedCard={selectedCard}\n                onCardClick={handleCardClick}\n                onCardLike={handleCardLike}\n                openDeletePopup={handleDeleteCardClick}\n              />\n              <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={onClose} onClosePopup={closeAllPopups} onUpdateUser={handleUpdateUser}/>\n              <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={onClose} onClosePopup={closeAllPopups} onAddPlace={handleAddPlaceSubmit} /> \n              <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={onClose} onClosePopup={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} /> \n              <DeleteCardPopup isOpen={isDeleteCardPopupOpen} onClose={onClose} onClosePopup={closeAllPopups} cardDelete={handleCardDelete} removedCard={removedCard} />\n              <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={onClose} onClosePopup={closeAllPopups} onUpdateUser={handleUpdateUser}/>\n            </Route>\n            <Route>\n              {loggedIn ? <Redirect to=\"/cards\" /> : <Redirect to=\"/sign-in\" />}\n            </Route>\n            <Footer />\n            </div>\n      </div>\n      </Switch>\n    </CurrentUserContext.Provider>\n  );\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App.js';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}